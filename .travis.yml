# Sample .travis.yml for R projects

language: r
warnings_are_errors: false
sudo: required

env:
 global:
   - CRAN: http://cran.rstudio.com

#env:
#  global:
#    - NOT_CRAN=true
#before_install: echo "options(repos = c(CRAN='http://cran.rstudio.com'))" > ~/.Rprofile


notifications:
  email:
    on_success: change
    on_failure: change

before_install:
  - curl -OL http://raw.github.com/craigcitro/r-travis/master/scripts/travis-tool.sh
  - chmod 755 ./travis-tool.sh
  - ./travis-tool.sh bootstrap

install:
- ./travis-tool.sh install_github hadley/devtools
#     - Rscript -e "install.packages('INLA', repos='http://www.math.ntnu.no/inla/R/stable')"
#    - Rscript -e "if (!require('covr')) install.packages('covr',repos='http://cran.us.r-project.org')"
#    - Rscript -e "if (!require('knitr')) install.packages('knitr',repos='http://cran.us.r-project.org')"


r_binary_packages:
  - XML
  - knitr

r_github_packages:
  - jimhester/covr
  - hadley/testthat
  - jimhester/lintr
  - andrewzm/inla

#after_success:
#  - Rscript -e 'library(covr);codecov()'
#  - Rscript -e 'library(covr);coveralls()'
#   run test coverage only for the travis build
#  - "[ $TARGET = travis ] && Rscript -e 'covr::coveralls()'"
after_success:
  - Rscript -e 'covr::codecov()'

